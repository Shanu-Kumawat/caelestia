exec = hyprctl dispatch submap global
submap = global

# █▀▀ █▀█ █▀█ █▀▀
# █▄▄ █▄█ █▀▄ ██▄

# -- Session & System --
bind = SUPER, X,       global, caelestia:session
bind = SUPER, Delete,  exec,   hyprctl dispatch exit
bind = SUPER, Y,       global, caelestia:lock
bind = SUPER, Y,       exec,   systemctl suspend
bind = SUPER, U,       global, caelestia:lock

# -- Kill Active --
bind = SUPER, Q, killactive,

# -- Kill/Restart Caelestia --
bindr = CTRL SUPER ALT, K, exec, qs -c caelestia kill
bindr = CTRL SUPER ALT, R, exec, qs -c caelestia kill; caelestia shell -d

# -- Overview --
bind = SUPER, Tab, exec, qs ipc -c overview call overview toggle


# ▄▀█ █▀█ █▀█ █▀
# █▀█ █▀▀ █▀▀ ▄█

# -- Launcher --
bindi  = SUPER, Super_L,  global, caelestia:launcher
bindin = SUPER, catchall, global, caelestia:launcherInterrupt

# -- Launcher Mouse Interrupts --
bindin = SUPER, mouse:272, global, caelestia:launcherInterrupt
bindin = SUPER, mouse:273, global, caelestia:launcherInterrupt
bindin = SUPER, mouse:274, global, caelestia:launcherInterrupt
bindin = SUPER, mouse:275, global, caelestia:launcherInterrupt
bindin = SUPER, mouse:276, global, caelestia:launcherInterrupt
bindin = SUPER, mouse:277, global, caelestia:launcherInterrupt
bindin = SUPER, mouse_up,  global, caelestia:launcherInterrupt
bindin = SUPER, mouse_down,global, caelestia:launcherInterrupt

# -- Standard Applications --
bind = SUPER, Return,    exec, app2unit -- $terminal
bind = SUPER, W,         exec, app2unit -- $browser
bind = SUPER, Z,         exec, app2unit -- $editor
bind = SUPER, G,         exec, app2unit -- github-desktop
bind = SUPER, E,         exec, app2unit -- $fileExplorer
# bind = SUPER ALT, E,   exec, app2unit -- nemo

# -- System Apps --
bind = ALT SHIFT, Escape, exec, app2unit -- qps
bind = SUPER CTRL, V,     exec, app2unit -- pavucontrol


# █░█ █ █▄░█ █▀▄ █▀█ █░█░█
# ▀▄▀ █ █░▀█ █▄▀ █▄█ ▀▄▀▄▀

# -- Focus & Navigation (HJKL) --
bind = SUPER, H, layoutmsg, focus l
bind = SUPER, L, layoutmsg, focus r
bind = SUPER, J, movefocus, d
bind = SUPER, K, movefocus, u

# -- Move Windows (Hyprscrolling) --
bind = SUPER SHIFT, H, layoutmsg, movewindowto l
bind = SUPER SHIFT, L, layoutmsg, movewindowto r
bind = SUPER SHIFT, J, layoutmsg, movewindowto d
bind = SUPER SHIFT, K, layoutmsg, movewindowto u

# -- Column Manipulation --
bind = SUPER CTRL, H, layoutmsg, move -col
bind = SUPER CTRL, L, layoutmsg, move +col

# -- Move Column to Workspace --
bind = SUPER CTRL, 1, layoutmsg, movecoltoworkspace 1
bind = SUPER CTRL, 2, layoutmsg, movecoltoworkspace 2
bind = SUPER CTRL, 3, layoutmsg, movecoltoworkspace 3
bind = SUPER CTRL, 4, layoutmsg, movecoltoworkspace 4
bind = SUPER CTRL, 5, layoutmsg, movecoltoworkspace 5
bind = SUPER CTRL, 6, layoutmsg, movecoltoworkspace 6
bind = SUPER CTRL, 7, layoutmsg, movecoltoworkspace 7
bind = SUPER CTRL, 8, layoutmsg, movecoltoworkspace 8
bind = SUPER CTRL, 9, layoutmsg, movecoltoworkspace 9
bind = SUPER CTRL, 0, layoutmsg, movecoltoworkspace 10

# -- Resize Columns --
binde = SUPER CTRL, J, layoutmsg, colresize -0.1
binde = SUPER CTRL, K, layoutmsg, colresize +0.1
bind  = SUPER CTRL, Period, layoutmsg, colresize +conf
bind  = SUPER CTRL, Comma,  layoutmsg, colresize -conf

# -- Column Swapping & Promotion --
bind = SUPER, O,      layoutmsg, promote
bind = SUPER, Comma,  layoutmsg, swapcol l
bind = SUPER, Period, layoutmsg, swapcol r

# -- Layout Fitting --
bind = SUPER CTRL, I, layoutmsg, fit active
bind = SUPER CTRL, U, layoutmsg, fit visible
bind = SUPER CTRL, Y, layoutmsg, fit all
bind = SUPER CTRL, F, layoutmsg, togglefit

# -- Window State --
bind = SUPER, F,     fullscreen, 0
bind = SUPER, D,     fullscreen, 1
bind = SUPER, Space, togglefloating,
bind = SUPER, P,     pin

# -- Simple Fullscreen Toggle (Timed) --
bind = SUPER, Semicolon, exec, hyprctl dispatch fullscreen 1; sleep 4; hyprctl dispatch fullscreen 1

# -- Picture-in-Picture --
bind = SUPER, I, exec, caelestia resizer pip

# -- Mouse Management --
bindm = SUPER, mouse:272, movewindow
bindm = SUPER, mouse:273, resizewindow

# Scroll through columns
# Matches keyboard behavior (Super+Ctrl+H/L)
bind = SUPER CTRL, mouse_down, layoutmsg, move -col
bind = SUPER CTRL, mouse_up, layoutmsg, move +col


# █░█░█ █▀█ █▀█ █▄▀ █▀ █▀█ ▄▀█ █▀▀ █▀▀
# ▀▄▀▄▀ █▄█ █▀▄ █░█ ▄█ █▀▀ █▀█ █▄▄ ██▄

# -- Switch Workspaces (1-10) --
$wsaction = ~/.config/hypr/scripts/wsaction.fish
bind = SUPER, 1, exec, $wsaction workspace 1
bind = SUPER, 2, exec, $wsaction workspace 2
bind = SUPER, 3, exec, $wsaction workspace 3
bind = SUPER, 4, exec, $wsaction workspace 4
bind = SUPER, 5, exec, $wsaction workspace 5
bind = SUPER, 6, exec, $wsaction workspace 6
bind = SUPER, 7, exec, $wsaction workspace 7
bind = SUPER, 8, exec, $wsaction workspace 8
bind = SUPER, 9, exec, $wsaction workspace 9
bind = SUPER, 0, exec, $wsaction workspace 10

# -- Cycle Workspaces --
bind  = SUPER TAB, mouse_down, workspace, -1
bind  = SUPER TAB, mouse_up,   workspace, +1
binde = SUPER, B,             workspace, -1
binde = SUPER, N,             workspace, +1

# -- Move Window to Workspace (Switch) --
bind = SUPER SHIFT, 1, exec, $wsaction movetoworkspace 1
bind = SUPER SHIFT, 2, exec, $wsaction movetoworkspace 2
bind = SUPER SHIFT, 3, exec, $wsaction movetoworkspace 3
bind = SUPER SHIFT, 4, exec, $wsaction movetoworkspace 4
bind = SUPER SHIFT, 5, exec, $wsaction movetoworkspace 5
bind = SUPER SHIFT, 6, exec, $wsaction movetoworkspace 6
bind = SUPER SHIFT, 7, exec, $wsaction movetoworkspace 7
bind = SUPER SHIFT, 8, exec, $wsaction movetoworkspace 8
bind = SUPER SHIFT, 9, exec, $wsaction movetoworkspace 9
bind = SUPER SHIFT, 0, exec, $wsaction movetoworkspace 10

binde = SUPER SHIFT, N, movetoworkspace, +1
binde = SUPER SHIFT, B, movetoworkspace, -1

# -- Move Window to Workspace (Silent) --
bind = SUPER ALT, 1, movetoworkspacesilent, 1
bind = SUPER ALT, 2, movetoworkspacesilent, 2
bind = SUPER ALT, 3, movetoworkspacesilent, 3
bind = SUPER ALT, 4, movetoworkspacesilent, 4
bind = SUPER ALT, 5, movetoworkspacesilent, 5
bind = SUPER ALT, 6, movetoworkspacesilent, 6
bind = SUPER ALT, 7, movetoworkspacesilent, 7
bind = SUPER ALT, 8, movetoworkspacesilent, 8
bind = SUPER ALT, 9, movetoworkspacesilent, 9
bind = SUPER ALT, 0, movetoworkspacesilent, 10

bind = SUPER ALT, N, movetoworkspacesilent, +1
bind = SUPER ALT, B, movetoworkspacesilent, -1

# -- Special Workspaces --
bind  = SUPER, S, exec, caelestia toggle specialws
binde = SUPER SHIFT, S, movetoworkspace, special:special

# -- Dedicated Special Toggles --
bind = CTRL SHIFT, Escape, exec, caelestia toggle sysmon
bind = SUPER, M,           exec, caelestia toggle music
bind = SUPER, C,           exec, caelestia toggle communication
bind = SUPER, T,           exec, caelestia toggle todo
bind = SUPER, Backslash,   togglespecialworkspace, terminal


# █▀▄▀█ █▀▀ █▀▄ █ ▄▀█
# █░▀░█ ██▄ █▄▀ █ █▀█

# -- Media Controls --
bindl = SUPER CTRL, P,          global, caelestia:mediaToggle
bindl = , XF86AudioPlay,        global, caelestia:mediaToggle
bindl = , XF86AudioPause,       global, caelestia:mediaToggle
bindl = , XF86AudioStop,        global, caelestia:mediaStop
bindl = CTRL SUPER, Bracketright, global, caelestia:mediaNext
bindl = , XF86AudioNext,        global, caelestia:mediaNext
bindl = CTRL SUPER, Bracketleft, global, caelestia:mediaPrev
bindl = , XF86AudioPrev,        global, caelestia:mediaPrev

# -- Volume Control --
bindl = , XF86AudioMicMute, exec, wpctl set-mute @DEFAULT_AUDIO_SOURCE@ toggle
bindl  = , XF86AudioMute, exec, wpctl set-mute @DEFAULT_AUDIO_SINK@ toggle
bindl  = SUPER SHIFT, M,  exec, wpctl set-mute @DEFAULT_AUDIO_SINK@ toggle
bindle = , XF86AudioRaiseVolume, exec, wpctl set-mute @DEFAULT_AUDIO_SINK@ 0; wpctl set-volume -l 1 @DEFAULT_AUDIO_SINK@ $volumeStep%+
bindle = , XF86AudioLowerVolume, exec, wpctl set-mute @DEFAULT_AUDIO_SINK@ 0; wpctl set-volume @DEFAULT_AUDIO_SINK@ $volumeStep%-

# -- Brightness --
bindl = , XF86MonBrightnessUp,   global, caelestia:brightnessUp
bindl = , XF86MonBrightnessDown, global, caelestia:brightnessDown


# █░█ ▀█▀ █ █░░ █ ▀█▀ █ █▀▀ █▀
# █▄█ ░█░ █ █▄▄ █ ░█░ █ ██▄ ▄█

# -- Screenshot --
bindl = , Print,          exec, caelestia screenshot           # Full screen capture > clipboard
bind  = SUPER SHIFT, F,   global, caelestia:screenshotFreeze   # Capture region (freeze)
bind  = SUPER SHIFT, R,   global, caelestia:screenshot         # Capture region

# -- Screen Recording --
bind = SUPER, R,          exec, caelestia record -s            # Record screen with sound
bind = SUPER SHIFT, X,    exec, caelestia record               # Record screen
# bind = SUPER SHIFT ALT, R, exec, caelestia record -r           # Record region

# -- Clipboard & Paste --
bind = SUPER, V,       exec, pkill fuzzel || caelestia clipboard
bind = SUPER, Grave,   exec, qs ipc -p ~/.config/quickshell/quickshell-clipboard call clipboard toggle
# bind = SUPER ALT, V, exec, pkill fuzzel || caelestia clipboard -d
bindl = SUPER CTRL, A, exec, sleep 0.5s && ydotool type -d 1 "$(cliphist list | head -1 | cliphist decode)"

# -- Emoji Picker --
bind = SUPER, Slash, exec, pkill fuzzel || caelestia emoji -p

# -- Color Picker --
bind = SUPER SHIFT, C, exec, hyprpicker -a

# -- OCR --
bind = SUPER SHIFT, T, exec, bash -c 'out=$(grim -g "$(slurp)" - | tesseract stdin stdout 2>/dev/null); if [ -n "$out" ]; then echo "$out" | wl-copy && notify-send "OCR" "Text copied"; else notify-send "OCR" "Cancelled or failed"; fi'

# -- Universal Zoom --
binde = SUPER, Minus,     exec, ~/.config/hypr/scripts/zoom.sh decrease 0.1
binde = SUPER, Equal,     exec, ~/.config/hypr/scripts/zoom.sh increase 0.1
bind  = SUPER, Backspace, exec, ~/.config/hypr/scripts/zoom.sh reset


# █▀▄▀█ █ █▀ █▀▀
# █░▀░█ █ ▄█ █▄▄

# -- Notifications --
bind = SUPER, Apostrophe, global, caelestia:showall
# bindl = SUPER, Apostrophe, global, caelestia:clearNotifs

# -- Testing --
bindl = SUPER ALT, f12, exec, notify-send -u low -i dialog-information-symbolic 'Test notification' "Here's a really long message to test truncation and wrapping\nYou can middle click or flick this notification to dismiss it!" -a 'Shell' -A "Test1=I got it!" -A "Test2=Another action"
